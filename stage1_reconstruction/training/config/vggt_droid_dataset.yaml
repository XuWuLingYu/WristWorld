# VGGT DROID Dataset Configuration
data:
  train:
    _target_: data.dynamic_dataloader.DynamicTorchDataset
    num_workers: 0
    shuffle: True
    pin_memory: False
    collate_fn:
      _target_: data.collate_fn.vggt_droid_collate_fn
    common_config:
      fix_img_num: ${view_num}
      fix_aspect_ratio: 0.567  # 接近DROID原始比例 (720/1280≈0.5625)
      load_track: False
      track_num: 1024
      training: True
      inside_random: True
      img_size: 518
      patch_size: 14
      rescale: True
      rescale_aug: True
      landscape_check: False
      debug: False
      get_nearby: True
      load_depth: False
      img_nums: [1, 3]
      allow_duplicate_img: False
      repeat_batch: False

      augs:
        cojitter: True
        cojitter_ratio: 0.3
        scales: [0.8, 1.2]
        aspects: [0.55, 0.58]  # 围绕原始比例0.567的合理范围
        color_jitter:
          brightness: 0.5
          contrast: 0.5
          saturation: 0.5
          hue: 0.1
          p: 0.9
        gray_scale: True
        gau_blur: False

    # VGGT DROID specific configuration
    dataset:
      _target_: data.datasets.vggt_droid.VggtDroidDataset
      split: train
      # DROID_DIR: /mnt/zezhong/vggt_data_wopc
      DROID_DIR: ./data_vggt
      min_num_frames: 1
      len_train: 100000
      enable_wrist_prediction: True
      view_num: ${view_num}

  val:
    _target_: data.dynamic_dataloader.DynamicTorchDataset
    num_workers: 8
    shuffle: False
    pin_memory: False
    collate_fn:
      _target_: data.collate_fn.vggt_droid_collate_fn
    common_config:
      fix_img_num: ${view_num}
      fix_aspect_ratio: 0.567  # 固定为接近原始比例
      load_track: False
      track_num: 1024
      training: False
      inside_random: False
      img_size: 518
      patch_size: 14
      rescale: True
      rescale_aug: False
      landscape_check: False
      debug: False
      get_nearby: True
      load_depth: False
      img_nums: [1,3]
      allow_duplicate_img: False

      augs:
        cojitter: False
        cojitter_ratio: 0.5
        scales: null
        aspects: [0.567, 0.567]  # 验证时固定为原始比例
        color_jitter: null
        gray_scale: False
        gau_blur: False

    # VGGT DROID specific configuration
    dataset:
      _target_: data.datasets.vggt_droid.VggtDroidDataset
      split: test
      # DROID_DIR: /mnt/zezhong/vggt_data_wopc
      DROID_DIR: ./data_vggt
      
      min_num_frames: 1
      len_test: 10000
      enable_wrist_prediction: True 
      view_num: ${view_num}